<app-admin-page-header
  headerText="user-management"
  [buttonText]="showButton() ? 'add-account' : undefined"
  buttonIcon="add"
  (buttonClicked)="addAccount()"
>
</app-admin-page-header>

<mat-form-field appearance="outline">
  <mat-label>{{
    'admin.admin-area.search-account-with-id' | transloco
  }}</mat-label>
  <input matInput appDisableForm [formControl]="formControl" />
  @if (formControl.value) {
    <button matSuffix mat-icon-button class="clear-button" (click)="clear()">
      <mat-icon>close</mat-icon>
    </button>
  }
</mat-form-field>

@let _users = users();
@if (isLoading()) {
  <app-loading-indicator></app-loading-indicator>
} @else {
  <mat-action-list fxLayout="column" fxLayoutGap="16px">
    @for (user of _users; track user) {
      <button mat-list-item class="user-list-item" [routerLink]="user.id">
        <div fxLayout="column" fxLayoutGap="16px">
          <span>{{ user.mailAddress ?? user.unverifiedMailAddress }}</span>
          <span style="opacity: 0.7">{{ user.id }}</span>
        </div>
      </button>
    }
  </mat-action-list>
  @if (formControl.value && _users.length === 0) {
    <span>{{ 'admin.admin-area.no-accounts-found' | transloco }}</span>
  }
}
